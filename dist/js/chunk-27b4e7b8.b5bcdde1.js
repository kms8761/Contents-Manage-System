(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27b4e7b8"],{"203d":function(e,t,a){"use strict";var n=a("33a8"),s=a.n(n);s.a},"33a8":function(e,t,a){},"78ac":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-card",[n("userAdd"),n("userDetail"),n("ConfirmSnackBar"),n("v-card-title",[e._v("\n      사용자 관리\n      "),n("v-spacer"),n("v-text-field",{attrs:{"append-icon":"mdi-heart",label:"검색어입력","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),n("v-card-title",[n("v-row",{attrs:{justify:"end"}},[n("v-btn",{attrs:{dark:""},on:{click:function(t){return e.btnClick("userAdd",e.companyId)}}},[e._v("사용자 추가")])],1)],1),n("v-data-table",{staticClass:"font-weight-bold",attrs:{search:e.search,headers:e.headers,items:e.users,"hide-default-footer":"","items-per-page":3,page:e.page},on:{"update:page":function(t){e.page=t},"page-count":function(t){e.pageCount=t}},scopedSlots:e._u([{key:"item.src",fn:function(t){t.item;return[e.x>600?n("v-avatar",{staticClass:"ma-3",attrs:{size:"100"}},[n("v-img",{attrs:{src:a("dbfb")}})],1):n("v-avatar",{attrs:{size:"40"}},[n("v-img",{attrs:{src:a("dbfb")}})],1)]}},{key:"item.expiredDate",fn:function(t){var a=t.item;return[e._v("\n        "+e._s(e._f("formatDateYMD")(a.expiredDate))+"\n      ")]}},{key:"item.name",fn:function(t){var a=t.item;return[n("v-list-item",{staticStyle:{"text-align":"left"}},[e._v(e._s(a.name))])]}},{key:"item.state",fn:function(t){var a=t.item;return[n("v-btn",{attrs:{color:e.getColor(a.state)},on:{click:function(t){return e.statusChange(a)}}},[e._v(e._s(a.state))])]}},{key:"item.action",fn:function(t){var a=t.item;return[n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.userDetail(a)}}},[n("v-icon",[e._v("mdi-information-outline")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){e.btnClick("userEdit"),e.editTable(a)}}},[n("v-icon",[e._v("mdi-square-edit-outline")])],1),n("v-btn",{attrs:{icon:""},on:{click:function(t){return e.deleteUser(a)}}},[n("v-icon",[e._v("mdi-trash-can-outline")])],1)]}}])}),n("div",{staticClass:"text-center"},[n("v-pagination",{attrs:{length:e.pageCount,circle:""},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1),n("router-view",{key:e.$route.fullPath})],1),n("foot")],1)},s=[],i=a("bc3a"),r=a.n(i),c=(a("c1df"),a("6688")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-form",{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[a("v-dialog",{attrs:{scrollable:"","max-width":"600px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-app-bar",{attrs:{dark:"",color:"#2a3248"}},[a("v-card-title",[a("span",[e._v(e._s(e.formTitle))])]),a("v-spacer"),a("v-btn",{attrs:{icon:"",dark:""}},[a("v-icon",{attrs:{size:"30px"},on:{click:e.modalClose}},[e._v("mdi-close")])],1)],1),a("v-card-text",[a("v-divider"),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{counter:20,rules:e.nameRules,label:"사용자명*",required:"","prepend-inner-icon":"mdi-account-check"},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-select",{attrs:{items:e.actitems,label:"활성화 여부*","prepend-inner-icon":"mdi-lock"},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{counter:20,rules:e.emailRules,label:"이메일*","prepend-inner-icon":"mdi-email",required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),a("userHvSelect"),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{counter:30,rules:e.addressRules,label:"주소*","prepend-inner-icon":"mdi-map-marker",required:""},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-text-field",{attrs:{counter:12,rules:e.telRules,label:"연락처*","prepend-inner-icon":"mdi-phone",required:""},model:{value:e.tel,callback:function(t){e.tel=t},expression:"tel"}})],1),a("v-col",{attrs:{cols:"12"}},[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":10,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{rules:e.endDayRules,label:"만료일",readonly:e.readonly,"prepend-inner-icon":"mdi-calendar"},model:{value:e.endDay,callback:function(t){e.endDay=t},expression:"endDay"}},n))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[a("v-date-picker",{attrs:{locale:"ko"},on:{input:function(t){e.menu=!1}},model:{value:e.endDay,callback:function(t){e.endDay=t},expression:"endDay"}})],1)],1),a("v-col",{attrs:{cols:"12"}},[a("v-file-input",{attrs:{rules:e.imgRules,accept:"image/png, image/jpeg, image/bmp","prepend-inner-icon":"mdi-camera","prepend-icon":"",label:"사진"},model:{value:e.picture,callback:function(t){e.picture=t},expression:"picture"}})],1),a("v-spacer")],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{disabled:!e.valid,color:"success"},on:{click:function(t){return e.saveClick()}}},[e._v("\n          저장\n        ")]),a("v-btn",{attrs:{color:"error"},on:{click:e.modalClose}},[e._v("\n          닫기\n        ")])],1)],1),a("AlertSnackBar")],1)],1)},l=[],d=(a("7f7f"),a("bd86")),u=a("a27f"),m=a("12a2"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-col",{attrs:{cols:"12"}},[a("v-dialog",{attrs:{scrollable:"","max-width":"400px"},scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-text-field",e._g({attrs:{label:"하이퍼비전","prepend-inner-icon":"mdi-plus"},model:{value:e.hvText,callback:function(t){e.hvText=t},expression:"hvText"}},n))]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("div",e._l(e.selected,(function(t){return a("v-chip",{key:t.name,attrs:{close:""},on:{"click:close":function(a){return e.remove(t)}}},[e._v("\n          "+e._s(t.name)+"\n        ")])})),1),a("v-card-title",{staticClass:"font-weight-bold"},[e._v("\n        하이퍼비전 리스트\n        "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"mdi-heart",label:"하이퍼비전 검색","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-data-table",{staticClass:"font-weight-bold",attrs:{"items-per-page":e.perpage=5,search:e.search,headers:e.headers,items:e.items,"show-select":"","item-key":"name"},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}}),a("v-btn",{attrs:{dark:""},on:{click:e.hvSelect}},[e._v("선택완료")])],1)],1)],1)},v=[],f={data:function(){return{dialog:!1,hvText:"",companyId:0,selected:[],search:"",pageCount:0,page:1,headers:[{text:"하이퍼 비전",align:"start",sortable:!0,value:"name"}],items:[]}},created:function(){var e=this;this.companyId=this.$store.state.companyId,this.$store.state.companyId=0,r.a.post("/api/company/userDevice",{companyId:this.companyId}).then((function(t){e.items=t.data.device})),u["a"].$on("userHVList",(function(t){e.selected=t})),u["a"].$on("HyperVisonClean",(function(t){e.hvText="",e.selected=[]}))},methods:{remove:function(e){this.selected.splice(this.selected.indexOf(e),1)},hvSelect:function(){this.dialog=!1,u["a"].$emit("select",this.selected),console.log(this.selected),this.selected.length>=1?this.hvText=this.selected[0].name+"등("+this.selected.length+")개 선택됨":this.hvText="*선택된 하이퍼비전이 없습니다.*"}}},h=f,b=(a("203d"),a("2877")),g=a("6544"),k=a.n(g),x=a("8336"),y=a("b0af"),V=a("99d9"),C=a("cc20"),D=a("62ad"),I=a("8fea"),_=a("169a"),$=a("2fa4"),T=a("8654"),S=Object(b["a"])(h,p,v,!1,null,null,null),w=S.exports;k()(S,{VBtn:x["a"],VCard:y["a"],VCardTitle:V["c"],VChip:C["a"],VCol:D["a"],VDataTable:I["a"],VDialog:_["a"],VSpacer:$["a"],VTextField:T["a"]});var A={components:{AlertSnackBar:m["a"],userHvSelect:w},data:function(){var e;return e={mode:"",select:[],branchId:0,formTitle:"",menu:!1,dialog:!1,valid:!0,readonly:!0,picture:null,state:"",name:"",email:"",endDay:"",address:"",tel:"",nameRules:[function(e){return!!e||"사용자명을 입력해주세요"},function(e){return e&&e.length<=20||"20글자 초과 하실 수 없습니다."}],emailRules:[function(e){return!!e||"E-mail을 입력해주세요"},function(e){return/.+@.+\..+/.test(e)||"잘못된 형식의 이메일 입니다"},function(e){return e&&e.length<=20||"20글자 초과 하실 수 없습니다."}],imgRules:[function(e){return!e||e.size<2e6||"Avatar size should be less than 2 MB!"}],endDayRules:[function(e){return!!e||"만료일을 입력해주세요"}]},Object(d["a"])(e,"address",""),Object(d["a"])(e,"addressRules",[function(e){return!!e||"주소를 입력해주세요"},function(e){return e&&e.length<=30||"30글자 초과 하실 수 없습니다."}]),Object(d["a"])(e,"telRules",[function(e){return!!e||"연락처 입력해주세요"},function(e){return e&&e.length<=12||"12글자 초과 하실 수 없습니다."}]),Object(d["a"])(e,"actitems",["active","block"]),e},mounted:function(){var e=this;u["a"].$on("userAdd",(function(t,a){e.companyId=a,"userAdd"===t&&(e.mode="post",e.formTitle="사용자 추가"),"userEdit"===t&&(e.mode="put",e.formTitle="사용자 정보 수정"),e.state="",e.select=[],e.name="",e.email="",e.endDay="",e.address="",e.tel="",e.dialog=!0,u["a"].$emit("asd",!0)})),u["a"].$on("userEditInfo",(function(t){e.mode="put",e.name=t.name,e.branchId=t.id,e.endDay=t.expiredDate,e.address=t.address,e.tel=t.tel,e.email=t.email,e.state=t.state,r.a.post("/api/company/editDevice",{branchId:t.id}).then((function(e){u["a"].$emit("userHVList",e.data.result)}))})),u["a"].$on("userAddOk",(function(t){e.dialog=!1})),u["a"].$on("select",(function(t){e.select=t}))},methods:{modalClose:function(){this.dialog=!1,this.$refs.form.resetValidation(),this.state="",this.name="",this.email="",this.endDay="",this.address="",this.tel="",u["a"].$emit("HyperVisonClean",!0)},saveClick:function(){"post"===this.mode?r.a.post("/api/company/userAdd",{name:this.name,selectDevices:this.select,companyId:this.companyId,address:this.address,tel:this.tel,expiredDate:this.endDay,state:this.state,email:this.email}).then((function(e){u["a"].$emit("SaveItem","user",e)})).catch((function(e){console.error(e.message)})):"put"===this.mode&&r.a.put("/api/company/user",{branchId:this.branchId,name:this.name,busNumber:this.business,address:this.address,tel:this.tel,expiredDate:this.date,devices:this.select}).then((function(e){u["a"].$emit("EditItem","user")})).catch((function(e){console.error(e.message)}))}}},R=A,O=a("40dc"),E=a("2e4b"),j=a("ce7e6"),B=a("23a7"),H=a("4bd4"),q=a("132d"),z=a("e449"),F=a("b974"),U=Object(b["a"])(R,o,l,!1,null,null,null),P=U.exports;k()(U,{VAppBar:O["a"],VBtn:x["a"],VCard:y["a"],VCardActions:V["a"],VCardText:V["b"],VCardTitle:V["c"],VCol:D["a"],VDatePicker:E["a"],VDialog:_["a"],VDivider:j["a"],VFileInput:B["a"],VForm:H["a"],VIcon:q["a"],VMenu:z["a"],VSelect:F["a"],VSpacer:$["a"],VTextField:T["a"]});var L=a("b536"),M={components:{userAdd:P,userDetail:c["a"],ConfirmSnackBar:L["default"]},data:function(){return{companyId:0,mode:"",x:window.innerWidth,devices:[],search:"",state:"",page:1,pageCount:0,tempUser:[],headers:[{text:"",align:"center",sortable:!1,value:"src"},{text:"사용자",value:"name",align:"center"},{text:"상태",value:"state",align:"center"},{text:"HYPER VSN",value:"hvNum",align:"center"},{text:"계약 만료일",value:"expiredDate"},{text:"정보보기/수정/삭제",value:"action",sortable:!1}],users:[],number:-1}},created:function(){var e=this;localStorage.getItem("token");this.companyId=this.$route.params.companyId,r.a.post("/api/company/user",{companyId:this.$route.params.companyId}).then((function(t){e.users=t.data.users})).catch((function(e){console.error(e.message)})),u["a"].$on("userAddOk",(function(t){r.a.post("/api/company/user",{companyId:e.$route.params.companyId}).then((function(t){e.users=t.data.users})).catch((function(e){console.error(e.message)}))})),u["a"].$on("delUserOk",(function(t){e.info=[{id:t}],r.a.delete("/api/company/user",{data:{info:e.info}}).then((function(t){r.a.post("/api/company/user",{companyId:e.$route.params.companyId}).then((function(t){e.users=t.data.users})).catch((function(e){console.error(e.message)}))}))}))},methods:{btnStatus:function(){},getColor:function(e){return"active"==e?"green":"red"},btnClick:function(e,t){u["a"].$emit("userAdd",e,t),this.$store.state.companyId=this.companyId},statusChange:function(e){this.number=this.users.indexOf(e),"active"==this.users[this.number].state?(this.users[this.number].state="block",r.a.put("/api/company/state",{id:e.id,state:"block"}).catch((function(e){console.error(e.message)}))):"block"==this.users[this.number].state&&(this.users[this.number].state="active",r.a.put("/api/company/state",{id:e.id,state:"active"}).catch((function(e){console.error(e.message)})))},editTable:function(e){u["a"].$emit("userEditInfo",e)},userDetail:function(e){r.a.post("/api/company/detail",{id:e.id}).then((function(e){u["a"].$emit("userDetail",e.data.branch)})).catch((function(e){console.error(e.message)}))},deleteUser:function(e){u["a"].$emit("DelUser",e)}}},N=M,J=a("8212"),Y=a("adda"),W=a("da13"),G=a("891e"),K=a("0fd9"),Q=Object(b["a"])(N,n,s,!1,null,null,null);t["default"]=Q.exports;k()(Q,{VAvatar:J["a"],VBtn:x["a"],VCard:y["a"],VCardTitle:V["c"],VDataTable:I["a"],VIcon:q["a"],VImg:Y["a"],VListItem:W["a"],VPagination:G["a"],VRow:K["a"],VSpacer:$["a"],VTextField:T["a"]})}}]);
//# sourceMappingURL=chunk-27b4e7b8.b5bcdde1.js.map